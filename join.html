<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Join Us | NYU PDU</title>
  <link rel="icon" type="image/png" href="PDUVIOLETWHITE.png">
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- Page-local styles (scoped with .join-* so we don't affect other pages) -->
  <style>
    /* Countdown pill (fixed under navbar, right side) */
    .join-countdown {
      position: fixed;
      top: calc(var(--nav-height, 80px) + 8px);
      right: 12px;
      z-index: 1101;
      display: inline-block;
      padding: .35rem .7rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.25);
      background: rgba(255,255,255,.10);
      font-weight: 700;
      letter-spacing: .2px;
      box-shadow: 0 0 12px rgba(199,191,255,.18) inset, 0 8px 24px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
    }

    /* Quick tiles grid (if we add any later) */
    .join-tiles{
      display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1rem; width: 90%; max-width: 1100px; margin: 2rem auto;
    }

    /* Month cards as a grid (no horizontal scroll) */
    .join-month-grid{
      display: grid; gap: 1rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      margin-top: .75rem;
    }
    .join-month-card{
      border: 1px solid rgba(255,255,255,.25); border-radius: 16px; padding: 1rem;
      background: rgba(255,255,255,.10); backdrop-filter: blur(10px);
      box-shadow: 0 10px 26px rgba(0,0,0,.28);
    }
    .join-month-card h4{ font-family: 'DM Serif Display', serif; margin-bottom: .5rem; }
    .join-month-card ul{ margin-left: 1.1rem; line-height: 1.7; }

    /* Myth busters (expand/collapse) */
    .join-myths details{
      border:1px solid rgba(255,255,255,.25); border-radius:12px; padding:.75rem 1rem; background:rgba(255,255,255,.08);
      margin:.5rem 0;
    }
    .join-myths summary{ cursor:pointer; font-weight:800; }
    .join-myths summary::-webkit-details-marker{ display:none; }
    .join-myths summary:after{ content:'▾'; float:right; opacity:.9; }
    .join-myths details[open] summary:after{ content:'▴'; }

    /* Mobile sticky CTA bar (unchanged) */
    @media (max-width: 960px){
      .join-sticky {
        position: fixed; left: 0; right: 0; bottom: 0; z-index: 1102;
        display: flex; gap: .5rem; justify-content: center; align-items: center;
        padding: .6rem .8rem;
        background: rgba(46,0,79,.85);
        border-top: 1px solid rgba(255,255,255,.2);
        backdrop-filter: blur(10px);
      }
      .join-sticky a { text-decoration: none; }
    }

    /* Local button styles (match site chips/buttons) */
    .btn-primary,.btn-secondary{
      display:inline-block; padding:.55rem 1rem; border-radius:999px; font-weight:800; letter-spacing:.2px; color:#fff; text-decoration:none;
      border:1px solid rgba(255,255,255,.30); background:rgba(255,255,255,.12); transition:all .2s ease;
    }
    .btn-primary:hover,.btn-secondary:hover{ background:rgba(255,255,255,.18); box-shadow:0 0 12px rgba(199,191,255,.28); }
  </style>
</head>

<body id="top">
  <!-- Navbar (desktop unchanged; mobile = NYU left · PDU centered · burger right) -->
  <header class="glass-navbar" id="siteNavbar">
    <div class="container nav-container">
      <!-- NYU (left on mobile) -->
      <div class="nav-right" aria-label="NYU logo">
        <img src="NYU_Short_RGB_White.png" alt="NYU Logo" class="logo-nyu" />
      </div>

      <!-- Desktop links center -->
      <nav class="nav-links" aria-label="Primary">
        <ul class="menu-root">
          <li><a href="index.html">Home</a></li>

          <li class="has-submenu">
            <a href="about.html" class="top-link" aria-haspopup="true" aria-expanded="false">About</a>
            <ul class="submenu" role="menu" aria-label="About submenu">
              <li role="none"><a role="menuitem" href="about.html#who-we-are">Who We Are</a></li>
              <li role="none"><a role="menuitem" href="about.html#apda">What is APDA?</a></li>
              <li role="none"><a role="menuitem" href="about.html#meetings">Meetings & Attendance</a></li>
              <li role="none"><a role="menuitem" href="equity.html">Equity</a></li>
              <li role="none"><a role="menuitem" href="why-pdu.html">Why PDU</a></li>
            </ul>
          </li>

          <li><a href="tournaments.html">Tournaments</a></li>

          <li class="has-submenu">
            <a href="join.html" class="top-link" aria-current="page" aria-haspopup="true" aria-expanded="false">Join Us</a>
            <ul class="submenu" role="menu" aria-label="Join Us submenu">
              <li role="none"><a role="menuitem" href="#mailing">Mailing List</a></li>
              <li role="none"><a role="menuitem" href="#meetings">Meetings (Monthly)</a></li>
              <li role="none"><a role="menuitem" href="#partners">Partners & Assignments</a></li>
              <li role="none"><a role="menuitem" href="#months">Month Cards</a></li>
              <li role="none"><a role="menuitem" href="#myths">Costs & Support</a></li>
              <li role="none"><a role="menuitem" href="#calendar">Calendar</a></li>
            </ul>
          </li>

          <li><a href="leadership.html">Leadership</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>

      <!-- PDU logo (centered on mobile) -->
      <div class="nav-left">
        <a href="index.html" aria-label="Home">
          <img src="PDULOGO_Trans.png" alt="PDU Logo" class="logo-pdu" />
        </a>
      </div>

      <!-- Burger (right on mobile) -->
      <button id="burger" class="nav-burger" aria-controls="mobileDrawer" aria-expanded="false" aria-label="Open menu">☰</button>
    </div>
  </header>

  <!-- Mobile drawer -->
  <div id="drawerScrim" class="drawer-scrim" hidden></div>
  <aside id="mobileDrawer" class="mobile-drawer" aria-hidden="true">
    <div class="drawer-header">
      <span>Menu</span>
      <button id="drawerClose" class="drawer-close" aria-label="Close menu">×</button>
    </div>
    <nav class="drawer-nav" aria-label="Mobile">
      <ul class="drawer-list">
        <li><a href="index.html">Home</a></li>

        <li class="drawer-group">
          <button class="drawer-toggle" aria-expanded="false">About</button>
          <ul class="drawer-submenu">
            <li><a href="about.html#who-we-are">Who We Are</a></li>
            <li><a href="about.html#apda">What is APDA?</a></li>
            <li><a href="about.html#meetings">Meetings & Attendance</a></li>
            <li><a href="equity.html">Equity</a></li>
            <li><a href="why-pdu.html">Why PDU</a></li>
          </ul>
        </li>

        <li><a href="tournaments.html">Tournaments</a></li>

        <li class="drawer-group">
          <button class="drawer-toggle" aria-expanded="true">Join Us</button>
          <ul class="drawer-submenu open">
            <li><a href="#mailing">Mailing List</a></li>
            <li><a href="#meetings">Meetings (Monthly)</a></li>
            <li><a href="#partners">Partners & Assignments</a></li>
            <li><a href="#months">Month Cards</a></li>
            <li><a href="#myths">Costs & Support</a></li>
            <li><a href="#calendar">Calendar</a></li>
          </ul>
        </li>

        <li><a href="leadership.html">Leadership</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Hero -->
  <section class="hero-section hero-compact" id="joinHero">
    <div>
      <h1 class="page-title">Join the Parliamentary Debate Union</h1>
      <p class="page-subtitle">Open to all NYU students — drop in Mondays or Wednesdays, 7–9 PM. Move at your own pace.</p>
    </div>
  </section>

  <!-- New York time countdown pill -->
  <div class="join-countdown" id="nextCountdown" aria-live="polite">Calculating next meeting…</div>

  <main class="main-content">
    <!-- Mailing List (primary action) -->
    <section class="glass-card reveal" id="mailing">
      <h3 class="about-header">Step One: Join the Mailing List</h3>
      <p class="about-preview">
        This is our main way to share <strong>monthly</strong> schedules, travel notes, and updates. Joining the list is the fastest way to plug in.
      </p>
      <div class="cta-row">
        <a class="link-chip" href="mailing-list.html">Join the mailing list →</a>
        <a class="link-chip" href="beginner.html">Beginners start here →</a>
      </div>
      <p class="note" style="margin-top:.5rem;">Links are placeholders—wire them to your real list and beginner page when ready.</p>
    </section>

    <!-- Meetings (Monthly) -->
    <section class="glass-card reveal" id="meetings">
      <h3 class="about-header">Meetings (Monthly View)</h3>
      <div class="time-row">
        <span class="chip">Mondays & Wednesdays</span>
        <span class="chip">7:00–9:00 PM</span>
        <span class="chip">Drop-in welcome</span>
        <span class="chip">Move at your own pace</span>
      </div>

      <div class="two-col" style="margin-top:.75rem;">
        <div>
          <p class="subhead">Monday — Lesson Meeting</p>
          <ul class="section-list">
            <li><strong>Lecture:</strong> Focused skill-building.</li>
            <li><strong>Engagement:</strong> Short activities to check understanding.</li>
            <li><strong>Practice Rounds:</strong> Try when you’re ready—no pressure.</li>
          </ul>

          <p class="subhead" style="margin-top:1rem;">Wednesday — Training Meeting</p>
          <ul class="section-list">
            <li><strong>Practice Round:</strong> Full scrim(s) with feedback.</li>
            <li><strong>Workshopping:</strong> Case-building with senior members and the board.</li>
            <li><strong>Feedback:</strong> Real-time notes from Education & Leadership.</li>
          </ul>
        </div>

        <div>
          <p class="subhead">Attendance (for tournaments & voting)</p>
          <ul class="section-list">
            <li><strong>Tournament eligibility (rolling 3 weeks):</strong></li>
            <ul class="section-list">
              <li>At least <strong>1</strong> Monday Lesson Meeting</li>
              <li>At least <strong>2</strong> Wednesday Training Meetings</li>
            </ul>
            <li style="margin-top:.5rem;"><strong>Voting:</strong> Attend at least <strong>60%</strong> of meetings in the semester.</li>
            <li style="margin-top:.5rem;"><strong>Check-in:</strong> Tap in at the tablet when you arrive.</li>
          </ul>

          <div class="cta-row">
            <a class="link-chip" href="#months">See monthly highlights →</a>
            <a class="link-chip" href="equity.html">Equity policy (CWs & opt-outs) →</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Month Cards (Sep–Dec) in a grid -->
    <section class="glass-card reveal" id="months">
      <h3 class="about-header">Month at a Glance</h3>
      <div class="join-month-grid" aria-label="Upcoming months">
        <div class="join-month-card">
          <h4>September</h4>
          <ul>
            <li>Kickoff lessons begin</li>
            <li>First scrim night</li>
            <li>Travel: Yale (placeholder)</li>
          </ul>
          <div class="cta-row"><a class="link-chip" href="calendar.html">Open calendar →</a></div>
        </div>
        <div class="join-month-card">
          <h4>October</h4>
          <ul>
            <li>Casebuilding workshop</li>
            <li>Travel: Princeton (placeholder)</li>
            <li>Novice spotlight night</li>
          </ul>
          <div class="cta-row"><a class="link-chip" href="calendar.html">Open calendar →</a></div>
        </div>
        <div class="join-month-card">
          <h4>November</h4>
          <ul>
            <li>Mid-semester scrim series</li>
            <li>Travel: Harvard (placeholder)</li>
            <li>Judge training basics</li>
          </ul>
          <div class="cta-row"><a class="link-chip" href="calendar.html">Open calendar →</a></div>
        </div>
        <div class="join-month-card">
          <h4>December</h4>
          <ul>
            <li>Final workshop & debrief</li>
            <li>Travel: Finals weekend (placeholder)</li>
            <li>Winter social</li>
          </ul>
          <div class="cta-row"><a class="link-chip" href="calendar.html">Open calendar →</a></div>
        </div>
      </div>
      <p class="note" style="margin-top:.5rem;">These are placeholders—update the bullets monthly (no weekly upkeep needed).</p>
    </section>

    <!-- Partners & Assignments (simple, static) -->
    <section class="glass-card reveal" id="partners">
      <h3 class="about-header">Partners & Assignments</h3>
      <p class="about-preview">
        There’s no formal permanent matching process. <strong>Partners are requested or assigned in person on a per-tournament basis.</strong>
      </p>
      <ul class="section-list">
        <li><strong>Have a preferred partner?</strong> Tell us at meetings—we’ll try to honor it based on availability and roster size.</li>
        <li><strong>Flexible or new?</strong> We’ll pair you with someone compatible (schedule, goals, experience).</li>
        <li><strong>Not a fit?</strong> Partnerships can change between events—it’s normal.</li>
      </ul>
      <div class="cta-row">
        <a class="link-chip" href="tournaments.html">How tournaments work →</a>
      </div>
    </section>

    <!-- Costs & Support (Myth Busters) -->
    <section class="glass-card reveal join-myths" id="myths">
      <h3 class="about-header">Costs & Support (Myth Busters)</h3>

      <details>
        <summary>Cost?</summary>
        <p class="about-preview" style="margin-top:.5rem;">$0 to compete. PDU covers travel, registration, and lodging.</p>
      </details>
      <details>
        <summary>Travel?</summary>
        <p class="about-preview" style="margin-top:.5rem;">Club-backed trips across the East Coast throughout the semester.</p>
      </details>
      <details>
        <summary>Experience?</summary>
        <p class="about-preview" style="margin-top:.5rem;">None required. Start Monday lessons; try Wednesday scrims when ready.</p>
      </details>
      <details>
        <summary>Time?</summary>
        <p class="about-preview" style="margin-top:.5rem;">Meetings are Mon/Wed 7–9 PM. Join when you can—move at your own pace. Travel is optional.</p>
      </details>
      <details>
        <summary>Gear?</summary>
        <p class="about-preview" style="margin-top:.5rem;">Bring a laptop or notebook if you like—nothing special required.</p>
      </details>
      <details>
        <summary>Accessibility & culture?</summary>
        <p class="about-preview" style="margin-top:.5rem;">Tell us your access needs (pace, seating, breaks)—we’ll work with you. We debate ideas, not identities. Read our <a href="equity.html" class="link-chip" style="padding:.2rem .6rem; border-radius:999px;">Equity policy →</a></p>
      </details>
    </section>

    <!-- Calendar (monthly) -->
    <section class="glass-card reveal" id="calendar">
      <h3 class="about-header">Calendar (Monthly)</h3>
      <p class="about-preview">We publish a monthly overview for meetings, travel weekends, and workshops.</p>
      <div class="cta-row">
        <a class="link-chip" href="calendar.html">Open the calendar →</a>
        <a class="link-chip" href="calendar.ics">Subscribe (.ics) →</a>
      </div>
      <p class="note">Links are placeholders—wire them to your real calendar when ready.</p>
    </section>
  </main>

  <footer class="glass-footer">
    <p>© 2025 NYU Parliamentary Debate Union. All rights reserved.</p>
  </footer>

  <!-- Mobile sticky CTA bar -->
  <div class="join-sticky" aria-label="Quick actions (mobile only)">
    <a class="btn-primary" href="#mailing">Join Mailing List</a>
    <a class="btn-secondary" href="#calendar">See Calendar</a>
  </div>

  <!-- Back to top -->
  <a href="#top" id="float-button" title="Back to top">
    <img src="PDULOGO_Trans.png" alt="Return Home">
  </a>

  <!-- Scripts (page-local only) -->
  <script>
    // Reveal-on-scroll for glass cards
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => entry.isIntersecting && entry.target.classList.add('reveal'));
    }, { threshold: 0.06 });
    document.querySelectorAll('.glass-card').forEach(el => observer.observe(el));

    // Keep --nav-height accurate for fixed countdown placement
    const navbar = document.getElementById('siteNavbar');
    function setNavHeightVar(){
      const h = navbar.getBoundingClientRect().height;
      document.documentElement.style.setProperty('--nav-height', h + 'px');
    }
    setNavHeightVar(); window.addEventListener('resize', setNavHeightVar);
    if('ResizeObserver' in window){ new ResizeObserver(setNavHeightVar).observe(navbar); }

    // Mobile drawer
    const burger = document.getElementById('burger');
    const drawer = document.getElementById('mobileDrawer');
    const closeBtn = document.getElementById('drawerClose');
    const scrim = document.getElementById('drawerScrim');
    function openDrawer(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); burger.setAttribute('aria-expanded','true'); scrim.hidden=false; document.body.style.overflow='hidden'; const first=drawer.querySelector('button,a'); if(first) first.focus(); }
    function closeDrawer(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); burger.setAttribute('aria-expanded','false'); scrim.hidden=true; document.body.style.overflow=''; burger.focus(); }
    function toggleDrawer(){ drawer.classList.contains('open') ? closeDrawer() : openDrawer(); }
    burger.addEventListener('click', toggleDrawer);
    closeBtn.addEventListener('click', closeDrawer);
    scrim.addEventListener('click', closeDrawer);
    window.addEventListener('keydown', e => { if(e.key==='Escape' && drawer.classList.contains('open')) closeDrawer(); });

    document.querySelectorAll('.drawer-toggle').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const ex = btn.getAttribute('aria-expanded')==='true';
        btn.setAttribute('aria-expanded', String(!ex));
        btn.nextElementSibling.classList.toggle('open');
      });
    });

    // Desktop submenu a11y
    document.querySelectorAll('.has-submenu').forEach(item=>{
      const link=item.querySelector('.top-link');
      item.addEventListener('mouseenter',()=>link.setAttribute('aria-expanded','true'));
      item.addEventListener('mouseleave',()=>link.setAttribute('aria-expanded','false'));
      link.addEventListener('focus',()=>link.setAttribute('aria-expanded','true'));
      const sm=item.querySelector('.submenu');
      sm?.addEventListener('keydown',e=>{ if(e.key==='Escape'){ link.focus(); link.setAttribute('aria-expanded','false'); } });
    });

    // ---------- New York Time countdown ----------
    // Helper: get current date-time parts in a target time zone
    function getNowPartsInTZ(timeZone){
      const dtf = new Intl.DateTimeFormat('en-US', {
        timeZone, year:'numeric', month:'2-digit', day:'2-digit',
        hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:false,
        weekday:'short'
      });
      const parts = dtf.formatToParts(new Date());
      const map = {};
      for (const p of parts) map[p.type] = p.value;
      const weekday = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].indexOf(map.weekday);
      return {
        year: +map.year, month: +map.month, day: +map.day,
        hour: +map.hour, minute: +map.minute, second: +map.second,
        weekday
      };
    }
    // Convert a "NY local" datetime to a real Date (UTC) robustly
    function zonedNYToDate(y,m,d,h,mi,s){
      const tz = 'America/New_York';
      // Create a UTC date with the same wall-clock components
      const wall = new Date(Date.UTC(y, m-1, d, h, mi, s || 0));
      // Find what time that UTC instant shows as in NY
      const inv = new Date(wall.toLocaleString('en-US', { timeZone: tz }));
      // Adjust by the delta to land at the intended NY wall time
      const diff = inv.getTime() - wall.getTime();
      return new Date(wall.getTime() - diff);
    }
    // Find next Mon(1)/Wed(3) 19:00 in NY time
    function nextNYMeeting(){
      const tz = 'America/New_York';
      const now = new Date();
      const p = getNowPartsInTZ(tz);
      const today = new Date(); // placeholder; we'll construct target explicitly

      // helper to get next day-of-week >= today, handling "after 7pm" cases
      function nextDow(targetDow){
        // days until target in NY perspective
        let delta = (targetDow - p.weekday + 7) % 7;
        // If it's the target day but after 19:00 NY, push one week
        if (delta === 0 && (p.hour > 19 || (p.hour === 19 && (p.minute>0 || p.second>0)))) {
          delta = 7;
        }
        // Build candidate date components in NY
        const base = new Date(Date.UTC(p.year, p.month-1, p.day));
        base.setUTCDate(base.getUTCDate() + delta);
        const y = base.getUTCFullYear();
        const m = base.getUTCMonth() + 1;
        const d = base.getUTCDate();
        return zonedNYToDate(y, m, d, 19, 0, 0);
      }

      const mon = nextDow(1);
      const wed = nextDow(3);
      return (mon < wed) ? mon : wed;
    }

    const cdEl = document.getElementById('nextCountdown');
    function tick(){
      const target = nextNYMeeting();
      const now = new Date();
      const ms = target - now;
      if (ms <= 0){ cdEl.textContent = 'Meeting happening now'; return; }
      const s = Math.floor(ms/1000);
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const ss = s%60;

      // Show NY weekday label
      const weekday = target.toLocaleDateString('en-US', { timeZone:'America/New_York', weekday:'long' });
      cdEl.textContent = `Next meeting: ${weekday} 7:00 PM ET in ${d}d ${h}h ${m}m ${ss}s`;
    }
    tick(); setInterval(tick, 1000);
  </script>
</body>
</html>